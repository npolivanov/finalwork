(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{176:function(e,t,n){e.exports=n.p+"static/media/brush.a13dfd9a.svg"},177:function(e,t,n){e.exports=n.p+"static/media/eraser.cb2bc092.svg"},208:function(e,t,n){e.exports=n(444)},213:function(e,t,n){},444:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(16),c=n.n(o),l=(n(213),n(24)),i=n(25),u=n(55),s=n(38),d=n(35),f=n(18),y=n(176),p=n.n(y),g=n(177),m=n.n(g),b="SELECT_TOOLS",E="SET_COLOR",v="SET_WIDTH",h="SET_FIGURES",S="SET_LINE",T="DRAW_LINE",x="ERASER_LINE",k="SET_TEXT",O="SET_CURRENT_SIZE",w="SET_ALIGN",j="SET_STYLE",C="SET_VALUE_TEXT",F="SET_BACKGROUND_COLOR",L="SET_SELECTED_FIGURE",z="SET_FIGURE_DRAW",A={selectTools:function(e){return{type:b,payload:e}},setColor:function(e){return{type:E,payload:e}},setBackgroundColor:function(e){return{type:F,payload:e}},setWidth:function(e){return{type:v,payload:e}},setFigures:function(e){return{type:h,payload:e}},setLine:function(){return{type:S}},drawLine:function(e){return{type:T,payload:e}},setEraser:function(e){return{type:x,payload:e}},setText:function(e){return{type:k,payload:e}},setCurrentSize:function(e){return{type:O,payload:e}},setAlign:function(e){return{type:w,payload:e}},setStyle:function(e){return{type:j,payload:e}},setValueText:function(e){return{type:C,payload:e}},setSelectedFigure:function(e){return{type:L,payload:e}},setFigureDraw:function(e){return{type:z,payload:e}}},D={color:"rgba(0, 0, 0, 1)",backgroundColor:"rgba(0, 0, 0, 1)",lineWidth:3,fontFamily:"calibri",fontSize:15,valueText:"New text",currentAlign:"left",currentTool:"brush",figures:[],tools:[{size:3,selected:!0,type:"brush"},{selected:!1,type:"delete"},{selected:!1,type:"text"},{selected:!1,type:"figure"}],selectedFigure:"triangle",arrayFiguresDraw:["triangle","square","circle"],currentFontSize:1,arrayFontSize:[{font:"Times New Roman",id:0},{font:"calibri",id:1},{font:"arial",id:2}],fontStyle:"normal",arrayFontStyle:["normal","bold","italic"],arrayAlign:["left","center","right"]};var W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case b:var a=Object(f.a)({},e),o=e.tools;return a.currentTool=r,a.tools=o.map((function(e){return e.type===r?("brush"===r&&!0===!e.selected?document.body.style.cursor="url(".concat(p.a,") 4 12, auto"):"delete"===r&&!0===!e.selected?document.body.style.cursor="url(".concat(m.a,") 4 12, auto"):"text"===r&&!0===!e.selected?document.body.style.cursor="text":("figure"===r&&!0===!e.selected||(a.currentTool=""),document.body.style.cursor="auto"),e.selected=!e.selected):e.selected=!1,e})),Object(f.a)({},a);case z:var c=Object(d.a)(e.figures);return"triangle"===e.selectedFigure&&c.push({type:"TRIANGLE",color:e.color,backgroundColor:e.backgroundColor,lineWidth:e.lineWidth,array:[],x:r.x,y:r.y}),Object(f.a)({},e,{figures:Object(d.a)(c)});case L:return Object(f.a)({},e,{selectedFigure:r});case E:return Object(f.a)({},e,{color:r});case F:return Object(f.a)({},e,{backgroundColor:r});case v:return Object(f.a)({},e,{lineWidth:r});case S:var l=Object(d.a)(e.figures);return l.push({type:"Line",color:e.color,lineWidth:e.lineWidth,array:[]}),Object(f.a)({},e,{figures:Object(d.a)(l)});case x:var i=Object(d.a)(e.figures);return i.push({type:"ERASER",color:e.color,lineWidth:e.lineWidth,array:[]}),Object(f.a)({},e,{figures:Object(d.a)(i)});case k:var u=Object(d.a)(e.figures);return u.push({type:"TEXT",color:e.color,fontSize:e.lineWidth,fontFamily:e.arrayFontSize[e.currentFontSize].font,text:e.valueText,x:r.x,y:r.y,fontStyle:e.fontStyle}),Object(f.a)({},e,{figures:Object(d.a)(u)});case T:var s=Object(d.a)(e.figures);return s[s.length-1].array=s[s.length-1].array.concat(r),Object(f.a)({},e,{figures:Object(d.a)(s)});case O:return Object(f.a)({},e,{currentFontSize:r});case w:return Object(f.a)({},e,{currentAlign:r});case C:return Object(f.a)({},e,{valueText:r});case j:return Object(f.a)({},e,{fontStyle:r});default:return e}},R="SET_DRAW",_="SET_SCALE",I={setDraw:function(e){return{type:R,payload:e}},setScale:function(e){return{type:_,payload:e}}},N={draw:!1,scale:.8};var V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case R:return Object(f.a)({},e,{draw:r});case _:return Object(f.a)({},e,{scale:r});default:return e}},B=n(44),G=function(e){var t=a.a.useRef(),n=a.a.useRef(),o=Object(r.useState)(!1),c=Object(u.a)(o,2),l=c[0],i=c[1];Object(r.useEffect)((function(){console.log("props.color"),console.log(e.color)}),[]),Object(r.useEffect)((function(){!0===l?(n.current.setNode(t.current),n.current.getLayer().batchDraw()):console.log("no")}),[l]);return a.a.createElement(a.a.Fragment,null,a.a.createElement(B.Text,{x:e.x,y:e.y,align:e.align,fill:e.color,ref:t,fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,text:e.text,draggable:!0,onClick:function(){return console.log("select text"),i(!l),void e.setDrawScene()}}),a.a.createElement(B.Transformer,{ref:n}))};function U(){var e=Object(l.a)(["\n  width: 1200px;\n  height: 800px;\n  position: absolute;\n  background-color: #fff;\n"]);return U=function(){return e},e}function X(){var e=Object(l.a)(["\n  width: 100%;\n  height: 80vh;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]);return X=function(){return e},e}var M=i.a.div(X()),Y=i.a.div(U());var q={setDraw:I.setDraw,setFigures:A.setFigures,setLine:A.setLine,drawLine:A.drawLine,setEraser:A.setEraser,setText:A.setText,setFigureDraw:A.setFigureDraw},K=Object(s.b)((function(e){return{draw:e.controlScene.draw,scale:e.controlScene.scale,color:e.panelTools.color,lineWidth:e.panelTools.lineWidth,currentTool:e.panelTools.currentTool,figures:e.panelTools.figures,currentFontSize:e.panelTools.currentFontSize,arrayFontSize:e.panelTools.arrayFontSize,currentAlign:e.panelTools.currentAlign}}),q)((function(e){var t=Object(r.useState)(!0),n=Object(u.a)(t,2),o=n[0],c=n[1];return a.a.createElement(M,null,a.a.createElement(Y,{style:{transform:"scale(".concat(e.scale,")")}},a.a.createElement("div",{id:"mainCanvas"},a.a.createElement(B.Stage,{container:"mainCanvas",onMouseDown:function(t){return o&&function(t){var n=document.getElementById("mainCanvas");switch(e.currentTool){case"brush":e.setLine(),n.onmousemove=function(t){e.drawLine([t.offsetX,t.offsetY])};break;case"delete":e.setEraser(),n.onmousemove=function(t){e.drawLine([t.offsetX,t.offsetY])}}n.onmouseup=function(){n.onmousemove=null}}()},onClick:function(t){return o?function(t){switch(e.currentTool){case"text":e.setText({x:t.evt.offsetX,y:t.evt.offsetY});break;case"figure":e.setFigureDraw({x:t.evt.offsetX,y:t.evt.offsetY})}}(t):c(!0)},width:1200,height:800},a.a.createElement(B.Layer,null,e.figures.map((function(t,n){switch(t.type){case"Line":return a.a.createElement(B.Line,{key:n,points:t.array,stroke:t.color,draggable:!0,onMouseDown:function(){return c(!1),void(document.body.style.cursor="move")},onMouseUp:function(){return c(!0),void(document.body.style.cursor="default")},strokeWidth:t.lineWidth});case"ERASER":return a.a.createElement(B.Line,{key:n,points:t.array,stroke:"white",strokeWidth:t.lineWidth});case"TEXT":return a.a.createElement(G,{key:n,edit:o,x:t.x,y:t.y,color:t.color,fontFamily:t.fontFamily,align:e.currentAlign,fontSize:t.fontSize,fontStyle:t.fontStyle,text:t.text,setDrawScene:function(){return c(!1)}});default:return a.a.createElement(B.Line,{key:n,points:t.array,stroke:t.color,strokeWidth:t.lineWidth})}})))))))})),P=n(477),H=n(185),J=n.n(H),Z=n(181),$=n.n(Z),Q=n(186),ee=n.n(Q),te=n(187),ne=n.n(te);function re(){var e=Object(l.a)(["\n  display: flex;\n  justify-content: space-around;\n  flex-wrap: wrap;\n"]);return re=function(){return e},e}function ae(){var e=Object(l.a)(["\n  width: 3%;\n  height: 80vh;\n  position: fixed;\n  z-index: 999;\n  background: #dddddd;\n"]);return ae=function(){return e},e}var oe=i.a.div(ae()),ce=i.a.div(re());var le={selectTools:A.selectTools},ie=Object(s.b)((function(e){return{tools:e.panelTools.tools}}),le)((function(e){return a.a.createElement(oe,null,a.a.createElement(ce,null,e.tools.map((function(t,n){return a.a.createElement(P.a,{color:"primary","aria-label":"upload picture",component:"span",onClick:function(){return e.selectTools(t.type)},key:n},function(e){switch(e.type){case"brush":return a.a.createElement($.a,{fontSize:"small",style:{color:e.selected?"black":"grey"}});case"delete":return a.a.createElement(J.a,{fontSize:"small",style:{color:e.selected?"black":"grey"}});case"text":return a.a.createElement(ee.a,{fontSize:"small",style:{color:e.selected?"black":"grey"}});case"figure":return a.a.createElement(ne.a,{fontSize:"small",style:{color:e.selected?"black":"grey"}})}}({type:t.type,selected:t.selected}))}))))})),ue="CLICK_DONE_SHOT",se="CREATE_VIDEO",de={clickDoneShot:function(e){return{type:ue,payload:e}},createVideo:function(){return{type:se}}},fe={shots:[]};var ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0,n=t.type;switch(t.payload,n){case ue:case se:return Object(f.a)({},e);default:return e}},pe=n(445);var ge={clickDoneShot:de.clickDoneShot,createVideo:de.createVideo},me=Object(s.b)((function(){}),ge)((function(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement(pe.a,{variant:"contained",onClick:e.clickDoneShot},"Click done shot"),a.a.createElement(pe.a,{variant:"contained",onClick:e.createVideo},"Done video"))})),be=n(115),Ee=n(189),ve=n.n(Ee),he=n(191),Se=n.n(he),Te=n(190),xe=n.n(Te),ke=n(193),Oe=n.n(ke),we=n(192),je=n.n(we),Ce=n(194),Fe=n.n(Ce),Le=n(195),ze=n.n(Le),Ae=n(196),De=n.n(Ae),We=n(197),Re=n.n(We),_e=n(478),Ie=n(479),Ne=n(480),Ve=n(481),Be=n(188);function Ge(){var e=Object(l.a)(["\n  display: flex;\n  align-items: center;\n"]);return Ge=function(){return e},e}function Ue(){var e=Object(l.a)(["\n  display: flex;\n  margin-left: 60px;\n"]);return Ue=function(){return e},e}function Xe(){var e=Object(l.a)(["\n  background: ",";\n  width: 20px;\n  height: 20px;\n  margin-left: 10px;\n"]);return Xe=function(){return e},e}function Me(){var e=Object(l.a)(["\n  position: absolute;\n  z-index: 9999;\n  top: 0px;\n  left: 100px;\n"]);return Me=function(){return e},e}function Ye(){var e=Object(l.a)(["\n  position: absolute;\n  z-index: 9999;\n  top: 0px;\n"]);return Ye=function(){return e},e}function qe(){var e=Object(l.a)(["\n  margin-left: 120px;\n  position: relative;\n"]);return qe=function(){return e},e}function Ke(){var e=Object(l.a)(["\n  position: relative;\n"]);return Ke=function(){return e},e}function Pe(){var e=Object(l.a)(["\n  width: 100%;\n  padding: 10px;\n  box-sizing: border-box;\n  display: flex;\n  background-color: #dddddd;\n  z-index: 9999;\n  position: relative;\n"]);return Pe=function(){return e},e}var He=i.a.div(Pe()),Je=i.a.div(Ke()),Ze=(i.a.div(qe()),i.a.div(Ye())),$e=(i.a.div(Me()),i.a.div(Xe(),(function(e){return e.color}))),Qe=i.a.div(Ue()),et=i.a.div(Ge()),tt={setColor:A.setColor,setWidth:A.setWidth,setCurrentSize:A.setCurrentSize,setAlign:A.setAlign,setStyle:A.setStyle,setValueText:A.setValueText,setBackgroundColor:A.setBackgroundColor,setSelectedFigure:A.setSelectedFigure},nt=Object(s.b)((function(e){return{color:e.panelTools.color,backgroundColor:e.panelTools.backgroundColor,lineWidth:e.panelTools.lineWidth,currentTool:e.panelTools.currentTool,currentFontSize:e.panelTools.currentFontSize,arrayFontSize:e.panelTools.arrayFontSize,arrayAlign:e.panelTools.arrayAlign,currentAlign:e.panelTools.currentAlign,valueText:e.panelTools.valueText,arrayFontStyle:e.panelTools.arrayFontStyle,arrayFiguresDraw:e.panelTools.arrayFiguresDraw,selectedFigure:e.panelTools.selectedFigure,fontStyle:e.panelTools.fontStyle}}),tt)((function(e){var t=Object(r.useState)(!1),n=Object(u.a)(t,2),o=n[0],c=n[1],l=Object(r.useState)(!1),i=Object(u.a)(l,2),s=i[0],d=i[1];return a.a.createElement(He,null,a.a.createElement(_e.a,null,a.a.createElement(pe.a,{onClick:function(){return c(!o)}},"Color ",a.a.createElement($e,{color:e.color}))),o&&a.a.createElement(Je,null,a.a.createElement(Ze,null,a.a.createElement(be.ChromePicker,{color:e.color,onChange:function(t){var n=t.rgb,r=n.r,a=n.g,o=n.b,c=n.a;e.setColor("rgba(".concat(r,", ").concat(a,", ").concat(o,", ").concat(c,")"))}}))),a.a.createElement(Qe,null,a.a.createElement(Ie.a,{label:"text"===e.currentTool?"FZ":"WL",style:{width:"45px"},type:"number",value:e.lineWidth,onChange:function(t){return t.target.value>0&&e.setWidth(t.target.value)}}),"text"===e.currentTool&&a.a.createElement(et,null,a.a.createElement(Ie.a,{label:"Text",type:"text",value:e.valueText,style:{marginLeft:"20px"},onChange:function(t){return e.setValueText(t.target.value)}}),a.a.createElement(Ne.a,null,a.a.createElement(Ve.a,{htmlFor:"filled-age-native-simple"},"fontFamily"),a.a.createElement(Be.a,{value:e.currentFontSize,onChange:function(t){return e.setCurrentSize(t.target.value)},style:{marginLeft:"20px"},inputProps:{name:"fontFamily",id:"filled-age-native-simple"}},e.arrayFontSize.map((function(e){return a.a.createElement("option",{value:e.id},e.font)})))),a.a.createElement(Ne.a,{style:{marginLeft:"20px"}},a.a.createElement(_e.a,{size:"small"},e.arrayAlign.map((function(t){switch(t){case"left":return a.a.createElement(pe.a,{style:{background:e.currentAlign===t?"#ccc":"none"},onClick:function(){return e.setAlign(t)}},a.a.createElement(ve.a,null));case"center":return a.a.createElement(pe.a,{style:{background:e.currentAlign===t?"#ccc":"none"},onClick:function(){return e.setAlign(t)}},a.a.createElement(xe.a,null));case"right":return a.a.createElement(pe.a,{style:{background:e.currentAlign===t?"#ccc":"none"},onClick:function(){return e.setAlign(t)}},a.a.createElement(Se.a,null))}})))),a.a.createElement(Ne.a,{style:{marginLeft:"20px"}},a.a.createElement(_e.a,{size:"small"},e.arrayFontStyle.map((function(t,n){switch(t){case"normal":return a.a.createElement(pe.a,{style:{background:e.fontStyle===t?"#ccc":"none"},key:n,onClick:function(){return e.setStyle(t)}},a.a.createElement(je.a,null));case"bold":return a.a.createElement(pe.a,{style:{background:e.fontStyle===t?"#ccc":"none"},key:n,onClick:function(){return e.setStyle(t)}},a.a.createElement(Oe.a,null));case"italic":return a.a.createElement(pe.a,{style:{background:e.fontStyle===t?"#ccc":"none"},key:n,onClick:function(){return e.setStyle(t)}},a.a.createElement(Fe.a,null))}}))))),"figure"===e.currentTool&&a.a.createElement(et,null,a.a.createElement(_e.a,null,a.a.createElement(pe.a,{style:{marginLeft:"20px"},onClick:function(){return d(!s)}},"BGColor"," ",a.a.createElement($e,{color:e.backgroundColor})),s&&a.a.createElement(Je,null,a.a.createElement(Ze,null,a.a.createElement(be.ChromePicker,{color:e.backgroundColor,onChange:function(t){var n=t.rgb,r=n.r,a=n.g,o=n.b,c=n.a;e.setBackgroundColor("rgba(".concat(r,", ").concat(a,", ").concat(o,", ").concat(c,")"))}})))),a.a.createElement(Ne.a,{style:{marginLeft:"20px"}},a.a.createElement(_e.a,{size:"small"},e.arrayFiguresDraw.map((function(t,n){switch(t){case"triangle":return a.a.createElement(pe.a,{style:{background:e.selectedFigure===t?"#ccc":"none"},key:n,onClick:function(){return e.setSelectedFigure(t)}},a.a.createElement(ze.a,null));case"square":return a.a.createElement(pe.a,{style:{background:e.selectedFigure===t?"#ccc":"none"},key:n,onClick:function(){return e.setSelectedFigure(t)}},a.a.createElement(De.a,null));case"circle":return a.a.createElement(pe.a,{style:{background:e.selectedFigure===t?"#ccc":"none"},key:n,onClick:function(){return e.setSelectedFigure(t)}},a.a.createElement(Re.a,null))}})))))))}));function rt(){var e=Object(l.a)([""]);return rt=function(){return e},e}var at=i.a.div(rt());var ot=function(){return a.a.createElement(at,null,a.a.createElement(nt,null),a.a.createElement(ie,null),a.a.createElement(K,null),a.a.createElement(me,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ct=n(43),lt=n(198),it=n(199),ut=n(41),st=n.n(ut),dt=n(89),ft=n(116),yt=n.n(ft),pt=st.a.mark(bt),gt=st.a.mark(Et),mt=st.a.mark(vt);function bt(e){return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("SAGA WORKING!!!");case 1:case"end":return e.stop()}}),pt)}function Et(){var e,t;return st.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:null!==(e=document.querySelector("#mainCanvas"))&&null!==(t=e.querySelector("canvas"))&&(r="http://localhost:5000/short",a=t.toDataURL(),yt.a.post(r,{data:a}).then((function(e){if(200!==e.status)throw new Error;return e})).catch((function(e){console.log(e)})),console.log(t.toDataURL()));case 2:case"end":return n.stop()}var r,a}),gt)}function vt(){return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t="http://localhost:5000/createvideo",yt.a.get(t);case 1:case"end":return e.stop()}var t}),mt)}var ht=st.a.mark(St);function St(){return st.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(dt.a)(R,bt);case 2:return e.next=4,Object(dt.a)(ue,Et);case 4:return e.next=6,Object(dt.a)(se,vt);case 6:case"end":return e.stop()}}),ht)}var Tt=Object(it.a)(),xt=Object(ct.combineReducers)({controlScene:V,panelTools:W,timeLine:ye}),kt=Object(lt.composeWithDevTools)({}),Ot=Object(ct.createStore)(xt,kt(Object(ct.applyMiddleware)(Tt)));Tt.run(St);var wt=Ot;window.addEventListener("wheel",(function(e){var t=wt.getState().controlScene.scale;e.wheelDelta>0&&t<5&&(t+=.1),e.wheelDelta<0&&t>.5&&(t-=.1),wt.dispatch(I.setScale(t))})),c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(s.a,{store:wt},a.a.createElement(ot,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[208,1,2]]]);
//# sourceMappingURL=main.3a0be006.chunk.js.map